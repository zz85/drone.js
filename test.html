<html>
	<body>
	<style>
		body {
			font-family: 'monospace';
		}
	</style>
	Hello world
	<input />
	<div id="debug"></div>


		<script>

		// Built for SteelSeries Stratus XL (Vendor: 0111 Product: 1419)


		// see http://html5gamepad.com/
		// Press any button on your gamepad(s) to make them show up
		// or switch tabs!

		// https://developer.mozilla.org/en-US/docs/Web/API/Gamepad
		// https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API
		// https://www.smashingmagazine.com/2015/11/gamepad-api-in-web-games/

			'use strict';

			var currentPad;
			var gp;
			var start = performance.timing.navigationStart;

			window.addEventListener('gamepadconnected', function(e) {
				console.log('Gamepad connected at index %d: %s. %d buttons, %d axes.',
				e.gamepad.index, e.gamepad.id,
				e.gamepad.buttons.length, e.gamepad.axes.length);

				currentPad = e.gamepad;

				animate();


			});

			window.addEventListener('gamepaddisconnected', function(e) {
			 	console.log('Gamepad disconnected from index %d: %s',
				e.gamepad.index, e.gamepad.id);
			});


			function animate() {
				requestAnimationFrame(animate);

				var gamepads = navigator.getGamepads();
			  	gp = gamepads[currentPad.index];

				if (gp) {
			    	// status.innerHTML = "Gamepad connected at index " + gp.index + ": " + gp.id +
			     //    ". It has " + gp.buttons.length + " buttons and " + gp.axes.length + " axes.";
			 		debug.innerHTML = `Axes: ${gp.axes.map( (a,b)=> `#${b}: ${a.toFixed(4)} `)} <br>
			 		Buttons: ${gp.buttons.map( (b, i) => `#${i}: ${b.pressed? 'on' : 'off'} ${b.value}` )}<br/>
			 		Timestamp: ${new Date(start + gp.timestamp / 1000 / 1000 )}<br/>
			 		Connected: ${gp.connected}<br/>
			 		Mapping: ${gp.mapping}<br/>
			 		`;
			    }
			}

			function applyDeadzone (number, threshold){
				percentage = (Math.abs(number) - threshold) / (1 - threshold);

				if(percentage < 0)
					percentage = 0;

			   return percentage * (number > 0 ? 1 : -1);
			}


			function Drone() {
				this.altitude = 0; // z
				this.bearing = 0;

				this.gps = [0, 0]; // x y
			}

			var axes_mappings = {
				'leftAnalogX': 0, // left -1, right + 1
				'leftAnalogY': 1, // up -1, down +1
				'rightAnalogX': 5, // up -1, down + 1
				'rightAnalogY': 2, // left -1, right +1,
				'directional': 9, // up -1, leff 0.7, down 0.1, right -0.4 - clockwise top -1, to bottom 0, top 1
				L2: 4, // release -1, full press 1
				R2: 3,
			};

			// do calibration, center, extreme ends!


			var button_mappings = {
				'leftAnalog': 13,
				'rightAnalog': 14,
				'start': 11,
				L1: 6,
				R1: 7,
				A: 0,
				B: 1,
				X: 3,
				Y: 4,



			};





		</script>

	</body>
</html>